
  <div class="table-container">
    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
  
      <ng-container matColumnDef="staff">
        <th mat-header-cell *matHeaderCellDef> Staff </th>
        <td mat-cell *matCellDef="let element"> {{element[0]?.userName}} </td>
      </ng-container>
  
      <ng-container *ngFor="let i = index; let column of displayedColumns2" 
      matColumnDef="{{column}}">
        <th mat-header-cell *matHeaderCellDef 
        [style.background-color]=" setBackgroundColourCell(i) "> {{setAMorPM(i)}} </th>
        <td mat-cell 
        (click)="cellClicked(element[0]?.userName,i)"
        [matMenuTriggerFor]="appMenu"
        [matMenuTriggerData]="{staffId: element[0], col: i}"
        [matTooltip]=" element[1][i]?.dutyType"
        [style.background-color]=" setBackgroundColourCell(i) " *matCellDef="let element"> {{element[1][i]?.dutyCode}} </td>
      </ng-container>
  
      <!-- Header row first group -->
      <ng-container matColumnDef="h0">
        <th mat-header-cell *matHeaderCellDef [attr.colspan]="1">
  
        </th>
      </ng-container>
  
      <!-- Header row  -->
      <ng-container *ngFor="let j = index; let columnH of headerRowDef2" 
      matColumnDef="{{columnH}}">
        <th mat-header-cell [style.background-color]=" setBackgroundColourHeader(j) "  *matHeaderCellDef [attr.colspan]="2"> {{ headerRowDay[j] }} </th>
      </ng-container>
  
      <tr mat-header-row *matHeaderRowDef="headerRowDef"></tr>
  
      <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  
  
    </table>
  
  </div>

  <mat-menu #appMenu="matMenu">
    <ng-template matMenuContent let-staffId="staffId" let-col="col">
      <span>Add Duty</span>
      <button mat-menu-item
      (click)="menuClick(staffId, col, 'duty1')"
      >Duty 1 longer duty name stretching the menu?</button>
      <button mat-menu-item
      (click)="menuClick(staffId, col, 'duty2')"
      >Duty 2</button>
    </ng-template>
  </mat-menu>

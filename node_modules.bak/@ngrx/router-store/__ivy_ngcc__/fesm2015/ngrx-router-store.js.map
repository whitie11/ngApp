{"version":3,"file":"ngrx-router-store.js","sources":["../../../../modules/router-store/src/actions.ts","../../../../modules/router-store/src/reducer.ts","../../../../modules/router-store/src/serializers/base.ts","../../../../modules/router-store/src/serializers/default_serializer.ts","../../../../modules/router-store/src/serializers/minimal_serializer.ts","../../../../modules/router-store/src/router_store_module.ts","../../../../modules/router-store/src/router_selectors.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  NavigationCancel,\n  NavigationEnd,\n  NavigationError,\n  NavigationStart,\n  RoutesRecognized,\n} from '@angular/router';\n\nimport { BaseRouterStoreState } from './serializers/base';\nimport { SerializedRouterStateSnapshot } from './serializers/default_serializer';\nimport { createAction, props } from '@ngrx/store';\n\n/**\n * An action dispatched when a router navigation request is fired.\n */\nexport const ROUTER_REQUEST = '@ngrx/router-store/request';\n\n/**\n * Payload of ROUTER_REQUEST\n */\nexport type RouterRequestPayload<\n  T extends BaseRouterStoreState = SerializedRouterStateSnapshot\n> = {\n  routerState: T;\n  event: NavigationStart;\n};\n\n/**\n * An action dispatched when a router navigation request is fired.\n */\nexport type RouterRequestAction<\n  T extends BaseRouterStoreState = SerializedRouterStateSnapshot\n> = {\n  type: typeof ROUTER_REQUEST;\n  payload: RouterRequestPayload<T>;\n};\n\nexport const routerRequestAction = createAction(\n  ROUTER_REQUEST,\n  props<{ payload: RouterRequestPayload<SerializedRouterStateSnapshot> }>()\n);\n/**\n * An action dispatched when the router navigates.\n */\nexport const ROUTER_NAVIGATION = '@ngrx/router-store/navigation';\n\n/**\n * Payload of ROUTER_NAVIGATION.\n */\nexport type RouterNavigationPayload<\n  T extends BaseRouterStoreState = SerializedRouterStateSnapshot\n> = {\n  routerState: T;\n  event: RoutesRecognized;\n};\n\n/**\n * An action dispatched when the router navigates.\n */\nexport type RouterNavigationAction<\n  T extends BaseRouterStoreState = SerializedRouterStateSnapshot\n> = {\n  type: typeof ROUTER_NAVIGATION;\n  payload: RouterNavigationPayload<T>;\n};\n\nexport const routerNavigationAction = createAction(\n  ROUTER_NAVIGATION,\n  props<{ payload: RouterNavigationPayload<SerializedRouterStateSnapshot> }>()\n);\n\n/**\n * An action dispatched when the router cancels navigation.\n */\nexport const ROUTER_CANCEL = '@ngrx/router-store/cancel';\n\n/**\n * Payload of ROUTER_CANCEL.\n */\nexport type RouterCancelPayload<\n  T,\n  V extends BaseRouterStoreState = SerializedRouterStateSnapshot\n> = {\n  routerState: V;\n  storeState: T;\n  event: NavigationCancel;\n};\n\n/**\n * An action dispatched when the router cancels navigation.\n */\nexport type RouterCancelAction<\n  T,\n  V extends BaseRouterStoreState = SerializedRouterStateSnapshot\n> = {\n  type: typeof ROUTER_CANCEL;\n  payload: RouterCancelPayload<T, V>;\n};\n\nexport const routerCancelAction = createAction(\n  ROUTER_CANCEL,\n  props<{ payload: RouterCancelPayload<SerializedRouterStateSnapshot> }>()\n);\n\n/**\n * An action dispatched when the router errors.\n */\nexport const ROUTER_ERROR = '@ngrx/router-store/error';\n\n/**\n * Payload of ROUTER_ERROR.\n */\nexport type RouterErrorPayload<\n  T,\n  V extends BaseRouterStoreState = SerializedRouterStateSnapshot\n> = {\n  routerState: V;\n  storeState: T;\n  event: NavigationError;\n};\n\n/**\n * An action dispatched when the router errors.\n */\nexport type RouterErrorAction<\n  T,\n  V extends BaseRouterStoreState = SerializedRouterStateSnapshot\n> = {\n  type: typeof ROUTER_ERROR;\n  payload: RouterErrorPayload<T, V>;\n};\n\nexport const routerErrorAction = createAction(\n  ROUTER_ERROR,\n  props<{ payload: RouterErrorPayload<SerializedRouterStateSnapshot> }>()\n);\n\n/**\n * An action dispatched after navigation has ended and new route is active.\n */\nexport const ROUTER_NAVIGATED = '@ngrx/router-store/navigated';\n\n/**\n * Payload of ROUTER_NAVIGATED.\n */\nexport type RouterNavigatedPayload<\n  T extends BaseRouterStoreState = SerializedRouterStateSnapshot\n> = {\n  routerState: T;\n  event: NavigationEnd;\n};\n\n/**\n * An action dispatched after navigation has ended and new route is active.\n */\nexport type RouterNavigatedAction<\n  T extends BaseRouterStoreState = SerializedRouterStateSnapshot\n> = {\n  type: typeof ROUTER_NAVIGATED;\n  payload: RouterNavigatedPayload<T>;\n};\n\nexport const routerNavigatedAction = createAction(\n  ROUTER_NAVIGATED,\n  props<{ payload: RouterNavigatedPayload<SerializedRouterStateSnapshot> }>()\n);\n\n/**\n * A union type of router actions.\n */\nexport type RouterAction<\n  T,\n  V extends BaseRouterStoreState = SerializedRouterStateSnapshot\n> =\n  | RouterRequestAction<V>\n  | RouterNavigationAction<V>\n  | RouterCancelAction<T, V>\n  | RouterErrorAction<T, V>\n  | RouterNavigatedAction<V>;\n","import { Action } from '@ngrx/store';\nimport {\n  ROUTER_CANCEL,\n  ROUTER_ERROR,\n  ROUTER_NAVIGATION,\n  RouterAction,\n} from './actions';\nimport { BaseRouterStoreState } from './serializers/base';\nimport { SerializedRouterStateSnapshot } from './serializers/default_serializer';\n\nexport type RouterReducerState<\n  T extends BaseRouterStoreState = SerializedRouterStateSnapshot\n> = {\n  state: T;\n  navigationId: number;\n};\n\nexport function routerReducer<\n  T extends BaseRouterStoreState = SerializedRouterStateSnapshot\n>(\n  state: RouterReducerState<T> | undefined,\n  action: Action\n): RouterReducerState<T> {\n  // Allow compilation with strictFunctionTypes - ref: #1344\n  const routerAction = action as RouterAction<any, T>;\n  switch (routerAction.type) {\n    case ROUTER_NAVIGATION:\n    case ROUTER_ERROR:\n    case ROUTER_CANCEL:\n      return {\n        state: routerAction.payload.routerState,\n        navigationId: routerAction.payload.event.id,\n      };\n    default:\n      return state as RouterReducerState<T>;\n  }\n}\n","import { RouterStateSnapshot } from '@angular/router';\n\n/**\n * Simple router state.\n * All custom router states / state serializers should have at least\n * the properties of this interface.\n */\nexport interface BaseRouterStoreState {\n  url: string;\n}\n\nexport abstract class RouterStateSerializer<\n  T extends BaseRouterStoreState = BaseRouterStoreState\n> {\n  abstract serialize(routerState: RouterStateSnapshot): T;\n}\n","import { ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\nimport { BaseRouterStoreState, RouterStateSerializer } from './base';\n\nexport interface SerializedRouterStateSnapshot extends BaseRouterStoreState {\n  root: ActivatedRouteSnapshot;\n  url: string;\n}\n\nexport class DefaultRouterStateSerializer\n  implements RouterStateSerializer<SerializedRouterStateSnapshot> {\n  serialize(routerState: RouterStateSnapshot): SerializedRouterStateSnapshot {\n    return {\n      root: this.serializeRoute(routerState.root),\n      url: routerState.url,\n    };\n  }\n\n  private serializeRoute(\n    route: ActivatedRouteSnapshot\n  ): ActivatedRouteSnapshot {\n    const children = route.children.map((c) => this.serializeRoute(c));\n    return {\n      params: route.params,\n      paramMap: route.paramMap,\n      data: route.data,\n      url: route.url,\n      outlet: route.outlet,\n      routeConfig: route.routeConfig\n        ? {\n            component: route.routeConfig.component,\n            path: route.routeConfig.path,\n            pathMatch: route.routeConfig.pathMatch,\n            redirectTo: route.routeConfig.redirectTo,\n            outlet: route.routeConfig.outlet,\n          }\n        : null,\n      queryParams: route.queryParams,\n      queryParamMap: route.queryParamMap,\n      fragment: route.fragment,\n      component: (route.routeConfig\n        ? route.routeConfig.component\n        : undefined) as any,\n      root: undefined as any,\n      parent: undefined as any,\n      firstChild: children[0],\n      pathFromRoot: undefined as any,\n      children,\n    };\n  }\n}\n","import { RouterStateSnapshot, ActivatedRouteSnapshot } from '@angular/router';\nimport { BaseRouterStoreState, RouterStateSerializer } from './base';\n\nexport interface MinimalActivatedRouteSnapshot {\n  routeConfig: ActivatedRouteSnapshot['routeConfig'];\n  url: ActivatedRouteSnapshot['url'];\n  params: ActivatedRouteSnapshot['params'];\n  queryParams: ActivatedRouteSnapshot['queryParams'];\n  fragment: ActivatedRouteSnapshot['fragment'];\n  data: ActivatedRouteSnapshot['data'];\n  outlet: ActivatedRouteSnapshot['outlet'];\n  firstChild?: MinimalActivatedRouteSnapshot;\n  children: MinimalActivatedRouteSnapshot[];\n}\n\nexport interface MinimalRouterStateSnapshot extends BaseRouterStoreState {\n  root: MinimalActivatedRouteSnapshot;\n  url: string;\n}\n\nexport class MinimalRouterStateSerializer\n  implements RouterStateSerializer<MinimalRouterStateSnapshot> {\n  serialize(routerState: RouterStateSnapshot): MinimalRouterStateSnapshot {\n    return {\n      root: this.serializeRoute(routerState.root),\n      url: routerState.url,\n    };\n  }\n\n  private serializeRoute(\n    route: ActivatedRouteSnapshot\n  ): MinimalActivatedRouteSnapshot {\n    const children = route.children.map((c) => this.serializeRoute(c));\n    return {\n      params: route.params,\n      data: route.data,\n      url: route.url,\n      outlet: route.outlet,\n      routeConfig: route.routeConfig\n        ? {\n            path: route.routeConfig.path,\n            pathMatch: route.routeConfig.pathMatch,\n            redirectTo: route.routeConfig.redirectTo,\n            outlet: route.routeConfig.outlet,\n          }\n        : null,\n      queryParams: route.queryParams,\n      fragment: route.fragment,\n      firstChild: children[0],\n      children,\n    };\n  }\n}\n","import {\n  Inject,\n  InjectionToken,\n  ModuleWithProviders,\n  NgModule,\n  ErrorHandler,\n} from '@angular/core';\nimport {\n  NavigationCancel,\n  NavigationError,\n  NavigationEnd,\n  Router,\n  RoutesRecognized,\n  NavigationStart,\n  Event,\n  RouterEvent,\n} from '@angular/router';\nimport { select, Selector, Store } from '@ngrx/store';\nimport { withLatestFrom } from 'rxjs/operators';\n\nimport {\n  ROUTER_CANCEL,\n  ROUTER_ERROR,\n  ROUTER_NAVIGATED,\n  ROUTER_NAVIGATION,\n  ROUTER_REQUEST,\n} from './actions';\nimport { RouterReducerState } from './reducer';\nimport {\n  RouterStateSerializer,\n  BaseRouterStoreState,\n} from './serializers/base';\nimport {\n  DefaultRouterStateSerializer,\n  SerializedRouterStateSnapshot,\n} from './serializers/default_serializer';\nimport { MinimalRouterStateSerializer } from './serializers/minimal_serializer';\n\nexport type StateKeyOrSelector<\n  T extends BaseRouterStoreState = SerializedRouterStateSnapshot\n> = string | Selector<any, RouterReducerState<T>>;\n\n/**\n * Full = Serializes the router event with DefaultRouterStateSerializer\n * Minimal = Serializes the router event with MinimalRouterStateSerializer\n */\nexport const enum RouterState {\n  Full,\n  Minimal,\n}\n\nexport interface StoreRouterConfig<\n  T extends BaseRouterStoreState = SerializedRouterStateSnapshot\n> {\n  stateKey?: StateKeyOrSelector<T>;\n  serializer?: new (...args: any[]) => RouterStateSerializer;\n  /**\n   * By default, ROUTER_NAVIGATION is dispatched before guards and resolvers run.\n   * Therefore, the action could run too soon, for example\n   * there may be a navigation cancel due to a guard saying the navigation is not allowed.\n   * To run ROUTER_NAVIGATION after guards and resolvers,\n   * set this property to NavigationActionTiming.PostActivation.\n   */\n  navigationActionTiming?: NavigationActionTiming;\n  /**\n   * Decides which router serializer should be used, if there is none provided, and the metadata on the dispatched @ngrx/router-store action payload.\n   * Set to `Full` to use the `DefaultRouterStateSerializer` and to set the angular router events as payload.\n   * Set to `Minimal` to use the `MinimalRouterStateSerializer` and to set a minimal router event with the navigation id and url as payload.\n   */\n  routerState?: RouterState;\n}\n\ninterface StoreRouterActionPayload {\n  event: RouterEvent;\n  routerState?: SerializedRouterStateSnapshot;\n  storeState?: any;\n}\n\nexport enum NavigationActionTiming {\n  PreActivation = 1,\n  PostActivation = 2,\n}\n\nexport const _ROUTER_CONFIG = new InjectionToken(\n  '@ngrx/router-store Internal Configuration'\n);\nexport const ROUTER_CONFIG = new InjectionToken(\n  '@ngrx/router-store Configuration'\n);\nexport const DEFAULT_ROUTER_FEATURENAME = 'router';\n\nexport function _createRouterConfig(\n  config: StoreRouterConfig\n): StoreRouterConfig {\n  return {\n    stateKey: DEFAULT_ROUTER_FEATURENAME,\n    serializer: MinimalRouterStateSerializer,\n    navigationActionTiming: NavigationActionTiming.PreActivation,\n    ...config,\n  };\n}\n\nenum RouterTrigger {\n  NONE = 1,\n  ROUTER = 2,\n  STORE = 3,\n}\n\n/**\n * Connects RouterModule with StoreModule.\n *\n * During the navigation, before any guards or resolvers run, the router will dispatch\n * a ROUTER_NAVIGATION action, which has the following signature:\n *\n * ```\n * export type RouterNavigationPayload = {\n *   routerState: SerializedRouterStateSnapshot,\n *   event: RoutesRecognized\n * }\n * ```\n *\n * Either a reducer or an effect can be invoked in response to this action.\n * If the invoked reducer throws, the navigation will be canceled.\n *\n * If navigation gets canceled because of a guard, a ROUTER_CANCEL action will be\n * dispatched. If navigation results in an error, a ROUTER_ERROR action will be dispatched.\n *\n * Both ROUTER_CANCEL and ROUTER_ERROR contain the store state before the navigation\n * which can be used to restore the consistency of the store.\n *\n * Usage:\n *\n * ```typescript\n * @NgModule({\n *   declarations: [AppCmp, SimpleCmp],\n *   imports: [\n *     BrowserModule,\n *     StoreModule.forRoot(mapOfReducers),\n *     RouterModule.forRoot([\n *       { path: '', component: SimpleCmp },\n *       { path: 'next', component: SimpleCmp }\n *     ]),\n *     StoreRouterConnectingModule.forRoot()\n *   ],\n *   bootstrap: [AppCmp]\n * })\n * export class AppModule {\n * }\n * ```\n */\n@NgModule({})\nexport class StoreRouterConnectingModule {\n  static forRoot<\n    T extends BaseRouterStoreState = SerializedRouterStateSnapshot\n  >(\n    config: StoreRouterConfig<T> = {}\n  ): ModuleWithProviders<StoreRouterConnectingModule> {\n    return {\n      ngModule: StoreRouterConnectingModule,\n      providers: [\n        { provide: _ROUTER_CONFIG, useValue: config },\n        {\n          provide: ROUTER_CONFIG,\n          useFactory: _createRouterConfig,\n          deps: [_ROUTER_CONFIG],\n        },\n        {\n          provide: RouterStateSerializer,\n          useClass: config.serializer\n            ? config.serializer\n            : config.routerState === RouterState.Full\n            ? DefaultRouterStateSerializer\n            : MinimalRouterStateSerializer,\n        },\n      ],\n    };\n  }\n\n  private lastEvent: Event | null = null;\n  private routerState: SerializedRouterStateSnapshot | null = null;\n  private storeState: any;\n  private trigger = RouterTrigger.NONE;\n\n  private stateKey: StateKeyOrSelector;\n\n  constructor(\n    private store: Store<any>,\n    private router: Router,\n    private serializer: RouterStateSerializer<SerializedRouterStateSnapshot>,\n    private errorHandler: ErrorHandler,\n    @Inject(ROUTER_CONFIG) private config: StoreRouterConfig\n  ) {\n    this.stateKey = this.config.stateKey as StateKeyOrSelector;\n\n    this.setUpStoreStateListener();\n    this.setUpRouterEventsListener();\n  }\n\n  private setUpStoreStateListener(): void {\n    this.store\n      .pipe(select(this.stateKey as any), withLatestFrom(this.store))\n      .subscribe(([routerStoreState, storeState]) => {\n        this.navigateIfNeeded(routerStoreState, storeState);\n      });\n  }\n\n  private navigateIfNeeded(\n    routerStoreState: RouterReducerState,\n    storeState: any\n  ): void {\n    if (!routerStoreState || !routerStoreState.state) {\n      return;\n    }\n    if (this.trigger === RouterTrigger.ROUTER) {\n      return;\n    }\n    if (this.lastEvent instanceof NavigationStart) {\n      return;\n    }\n\n    const url = routerStoreState.state.url;\n    if (!isSameUrl(this.router.url, url)) {\n      this.storeState = storeState;\n      this.trigger = RouterTrigger.STORE;\n      this.router.navigateByUrl(url).catch((error) => {\n        this.errorHandler.handleError(error);\n      });\n    }\n  }\n\n  private setUpRouterEventsListener(): void {\n    const dispatchNavLate =\n      this.config.navigationActionTiming ===\n      NavigationActionTiming.PostActivation;\n    let routesRecognized: RoutesRecognized;\n\n    this.router.events\n      .pipe(withLatestFrom(this.store))\n      .subscribe(([event, storeState]) => {\n        this.lastEvent = event;\n\n        if (event instanceof NavigationStart) {\n          this.routerState = this.serializer.serialize(\n            this.router.routerState.snapshot\n          );\n          if (this.trigger !== RouterTrigger.STORE) {\n            this.storeState = storeState;\n            this.dispatchRouterRequest(event);\n          }\n        } else if (event instanceof RoutesRecognized) {\n          routesRecognized = event;\n\n          if (!dispatchNavLate && this.trigger !== RouterTrigger.STORE) {\n            this.dispatchRouterNavigation(event);\n          }\n        } else if (event instanceof NavigationCancel) {\n          this.dispatchRouterCancel(event);\n          this.reset();\n        } else if (event instanceof NavigationError) {\n          this.dispatchRouterError(event);\n          this.reset();\n        } else if (event instanceof NavigationEnd) {\n          if (this.trigger !== RouterTrigger.STORE) {\n            if (dispatchNavLate) {\n              this.dispatchRouterNavigation(routesRecognized);\n            }\n            this.dispatchRouterNavigated(event);\n          }\n          this.reset();\n        }\n      });\n  }\n\n  private dispatchRouterRequest(event: NavigationStart): void {\n    this.dispatchRouterAction(ROUTER_REQUEST, { event });\n  }\n\n  private dispatchRouterNavigation(\n    lastRoutesRecognized: RoutesRecognized\n  ): void {\n    const nextRouterState = this.serializer.serialize(\n      lastRoutesRecognized.state\n    );\n    this.dispatchRouterAction(ROUTER_NAVIGATION, {\n      routerState: nextRouterState,\n      event: new RoutesRecognized(\n        lastRoutesRecognized.id,\n        lastRoutesRecognized.url,\n        lastRoutesRecognized.urlAfterRedirects,\n        nextRouterState\n      ),\n    });\n  }\n\n  private dispatchRouterCancel(event: NavigationCancel): void {\n    this.dispatchRouterAction(ROUTER_CANCEL, {\n      storeState: this.storeState,\n      event,\n    });\n  }\n\n  private dispatchRouterError(event: NavigationError): void {\n    this.dispatchRouterAction(ROUTER_ERROR, {\n      storeState: this.storeState,\n      event: new NavigationError(event.id, event.url, `${event}`),\n    });\n  }\n\n  private dispatchRouterNavigated(event: NavigationEnd): void {\n    const routerState = this.serializer.serialize(\n      this.router.routerState.snapshot\n    );\n    this.dispatchRouterAction(ROUTER_NAVIGATED, { event, routerState });\n  }\n\n  private dispatchRouterAction(\n    type: string,\n    payload: StoreRouterActionPayload\n  ): void {\n    this.trigger = RouterTrigger.ROUTER;\n    try {\n      this.store.dispatch({\n        type,\n        payload: {\n          routerState: this.routerState,\n          ...payload,\n          event:\n            this.config.routerState === RouterState.Full\n              ? payload.event\n              : {\n                  id: payload.event.id,\n                  url: payload.event.url,\n                  // safe, as it will just be `undefined` for non-NavigationEnd router events\n                  urlAfterRedirects: (payload.event as NavigationEnd)\n                    .urlAfterRedirects,\n                },\n        },\n      });\n    } finally {\n      this.trigger = RouterTrigger.NONE;\n    }\n  }\n\n  private reset() {\n    this.trigger = RouterTrigger.NONE;\n    this.storeState = null;\n    this.routerState = null;\n  }\n}\n\n/**\n * Check if the URLs are matching. Accounts for the possibility of trailing \"/\" in url.\n */\nfunction isSameUrl(first: string, second: string): boolean {\n  return stripTrailingSlash(first) === stripTrailingSlash(second);\n}\n\nfunction stripTrailingSlash(text: string): string {\n  if (text.length > 0 && text[text.length - 1] === '/') {\n    return text.substring(0, text.length - 1);\n  }\n  return text;\n}\n","import { createSelector } from '@ngrx/store';\nimport { RouterStateSelectors } from './models';\nimport { RouterReducerState } from './reducer';\n\nexport function getSelectors<V>(\n  selectState: (state: V) => RouterReducerState<any>\n): RouterStateSelectors<V>;\nexport function getSelectors<V>(\n  selectState: (state: V) => RouterReducerState<any>\n): RouterStateSelectors<V> {\n  const selectRouterState = createSelector(\n    selectState,\n    (router) => router && router.state\n  );\n  const selectCurrentRoute = createSelector(\n    selectRouterState,\n    (routerState) => {\n      if (!routerState) {\n        return undefined;\n      }\n      let route = routerState.root;\n      while (route.firstChild) {\n        route = route.firstChild;\n      }\n      return route;\n    }\n  );\n  const selectFragment = createSelector(\n    selectCurrentRoute,\n    (route) => route && route.fragment\n  );\n  const selectQueryParams = createSelector(\n    selectCurrentRoute,\n    (route) => route && route.queryParams\n  );\n  const selectQueryParam = (param: string) =>\n    createSelector(selectQueryParams, (params) => params && params[param]);\n  const selectRouteParams = createSelector(\n    selectCurrentRoute,\n    (route) => route && route.params\n  );\n  const selectRouteParam = (param: string) =>\n    createSelector(selectRouteParams, (params) => params && params[param]);\n  const selectRouteData = createSelector(\n    selectCurrentRoute,\n    (route) => route && route.data\n  );\n  const selectUrl = createSelector(\n    selectRouterState,\n    (routerState) => routerState && routerState.url\n  );\n\n  return {\n    selectCurrentRoute,\n    selectFragment,\n    selectQueryParams,\n    selectQueryParam,\n    selectRouteParams,\n    selectRouteParam,\n    selectRouteData,\n    selectUrl,\n  };\n}\n"]}